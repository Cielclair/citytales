<!--pages/profile/profile.wxml-->
<view class="header">
    <image  class= "avatar" mode = "aspectFill" src = "{{user.avatar}}" />
    <view class="user-info">

      <view class="user-name">{{user.custom_nickname || user.nickname}}</view>
      <view class="user-bio">{{user.bio || "Please add your first bio"}}</view>

      <view class="follows">
        <view class="liked">
          <text>{{stories_liked.length || 0}}</text>
          <text>喜欢</text>
        </view>
        <view class="saved">
          <text>{{stories_saved.length || 0}}</text>
          <text>收藏</text>
        </view>
        <!-- <view class="saved">
          <text>{{events_created.length}}</text>
          <text>主办</text>
        </view> -->
      </view>
    </view>
    <view class="edit-icon">
      <image wx:if="{{apple}}" class="edit-icon" bindtap="navigateToEditProfile" src="https://cloud-minapp-31851.cloud.ifanrusercontent.com/1idxMM49dExGTDnr.gif"></image>
    </view>
</view>

<view class="bar">
  <wux-segmented-control class="switch-bar" values="{{ ['我喜欢的', '我的收藏'] }}" bind:change="onChange" />
</view>

<view wx:if="{{!user.id}}" class="login-field">
  <button class="login-btn" open-type="getUserInfo" bindgetuserinfo="loginWithWechat">点击登陆</button>
  <view class="login-text">*开启你的城事之旅</view>
</view>

<view wx:if="{{current===0}}" class="profile_story_container">
  <view wx:for="{{stories_liked}}" class="card-container" catchtap="navigateToShow" data-type="edit" data-id="{{item.id}}" wx:key>
    <view class="card">
      <image class="story-img" src="{{ item.image }}" alt="Pic" style="width:100%" mode="aspectFill"></image>
      <view class="info-section">
        <view class="info-left">
          <image class = "avatar" mode = "aspectFill" src = "{{ item.avatar}}" />
          <view class="h1">{{ item.title }}</view>
        </view>
        <!-- <image class='top-icon' src='../../images/想看.png'></image> -->
      </view>
    </view>
  </view>
</view>

<view wx:if="{{current===1}}" class="profile_story_container">
  <view wx:for="{{stories_saved}}" class="card-container" catchtap="navigateToShow" data-type="edit" data-id="{{item.id}}" wx:key>
    <view class="card">
      <image class="story-img" src="{{ item.image }}" alt="Pic" style="width:100%" mode="aspectFill"></image>
      <view class="info-section">
        <view class="info-left">
          <image class = "avatar" mode = "aspectFill" src = "{{ item.avatar}}" />
          <view class="h1">{{ item.title }}</view>
        </view>
        <!-- <image class='top-icon' src='../../images/想看.png'></image> -->
      </view>
    </view>
  </view>
</view>