<!--pages/home/home.wxml-->
<view class="page-body">
  <view class="page-section page-section-gap">
    <view wx:if="{{current==0}}" class="map-container">
    <view class="locate-btn" bindtap="jumpToCurrentLocation">
      <image class='locate-icon' src='/images/gps.png'></image>
    </view>
    <view class="zoom-section">
      <image class='zoom-in-btn' src='/images/plus.png' bindtap="zoomIn"></image>
      <image class='zoom-out-btn' src='/images/minus.png' bindtap="zoomOut"></image>
    </view>
      <map
        id="myMap"
        style="width: 100%; height: 95vh;"
        latitude="{{latitude}}"
        longitude="{{longitude}}"
        markers="{{markers}}"
        bindmarkertap="markerTap"
        bindtap="mapTap"
        scale="{{scale}}"
        show-location
        show-compass
        enable-rotate
      ></map>


      <view class="ad-hoc-card-container" >
        <view wx:if="{{current_story}}" class="ad-hoc-card" catchtap="navigateToShow" data-type="edit" data-id="{{current_story.id}}" wx:key>

          <image  class= "event-img" style="width: 100%; height: 80%" mode = "aspectFill" src = "{{ current_story.image }}" />
          <view class="event-info">
            <image  class = "avatar" mode = "aspectFill" src = "{{current_story.avatar}}" />
            <view class="user-story">{{ current_story.title }}</view>
          </view>      
        </view>
      </view>
    </view>

<view wx:if="{{current==1}}" class="index-container">
  
  <wux-filterbar id="filterbar" items="{{ items }}" bind:change="onChange" bind:open="onOpen" bind:close="onClose" />
    <view class="weui-panel weui-panel_access" catchtouchmove="{{ opened ? 'noop' : '' }}">
      <view class="weui-panel__bd">
        <view class="weui-media-box weui-media-box_appmsg" hover-class="weui-cell_active" wx:for="{{ repos }}" wx:key="">
          <view class="weui-media-box__hd weui-media-box__hd_in-appmsg">
            <image class="weui-media-box__thumb" src="{{ item.owner.avatar_url }}" />
          </view>
          <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
            <view class="weui-media-box__title">{{ item.name }}</view>
            <view class="weui-media-box__desc">{{ item.description }}</view>
            <view class="weui-media-box__info">
              <view class="weui-media-box__info__meta">forks: {{ item.forks_count }}</view>
              <view class="weui-media-box__info__meta">stars: {{ item.stargazers_count }}</view>
              <view class="weui-media-box__info__meta">date: {{ item.date }}</view>
            </view>
          </view>
        </view>
      </view>
    </view>




  <view wx:for="{{stories}}" class="card-container" catchtap="navigateToShow" data-type="edit" data-id="{{item.id}}" wx:key>
    <view class="card">
      <image class="story-img" src="{{ item.image }}" alt="Pic" style="width:100%" mode="aspectFill"></image>
      <view class="info-section">
        <view class="info-left">
          <image class = "avatar" mode = "aspectFill" src = "{{item.avatar}}" />
            <view class="h1">{{ item.title }}</view>
        </view>
        <!-- <image class='top-icon' src='../../images/想看.png'></image> -->
      </view>
    </view>
  </view>
</view>
    
</view>
  <view class="bar">
    <wux-segmented-control id="segmented-control" class="switch-bar" values="{{ ['地图', '城事'] }}" bind:change="onChange" />
  </view>
</view>


